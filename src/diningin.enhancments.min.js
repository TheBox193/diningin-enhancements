/**
 * @license
 * @name diningin.enhancments
 * @description A quick set of enhancmetns to dingingin.com Eat it up!
 * @version 1.5.0
 * @author Jonathan Stassen <jstassen.com>
 * @see https://github.com/TheBox193/diningin-enhancements
 */
function menuHighlight(){var e=getHighlightThresholdValue();$(".menu-item").each(function(){var t=$(this).closest("tr"),n=getPriceByEl(t),o=Number(n*(1+TAX)).toFixed(2);o<=(Number(e)||11)?t.css("background-color","lightblue"):t.css("background-color","white")})}function getHighlightThresholdValue(){return options.doHighlightUnderValue-getCartTotal()}function checkCartTotal(){var e=getCartTotal();e!==lastCartTotal&&(lastCartTotal=e,menuHighlight())}function fixCheckout(){var e=$(".ibtnContinueBtnBev")[0];e&&"/checkout"!==e&&(e.href="/checkout")}function getLoved(){var e=[];return $("#MostedLoved .menu-item-data").each(function(){e.push(parseInt(this.textContent,10))}),e}function setLoved(e){getMenuItemElById(e).find(".ItemName").prepend('<span style="position: absolute; left: -4px;">‚ù§</span>')}function convertPriceStringToNumber(e){return Number(e.replace(/[^0-9\.]+/g,""))}function getPriceByEl(e){return convertPriceStringToNumber(e.find(".ItemCost").text())}function getCartTotal(){return convertPriceStringToNumber($(".CartSubtotalLabel").text())}function getPriceById(e){return getPriceByEl(getMenuItemElById(e))}function getMenuItemElById(e){return $("#"+e).closest("tr")}function showLoved(){var e=getLoved();$.each(e,function(e,t){setLoved(t)})}function removeExtraneousElements(){var e=["#spnAddressInfo","#MPSContent > #tabnav","#mps_time_header_container",".mps_calendar_container > .mps_time_header_container","#ctl00_pageContentPlaceholder_cart_pnlTimeCart1","#menu_delivery_address","#ctl00_pageContentPlaceholder_CRestaurantTopBar_imgIsPremier","#DIVAlertNote","#spnCategoryDDL","#CartMid p:contains('item names')","#RestMenu td:contains('no prices')","#MostedLoved","#payment_info_title_container",".tip_container","#pnlStepTipsCoupons > #order_total_container","#pnlStepTipsCoupons .clear","#menu_your_order_delivery_time","#pnlBillingcode #lblBillingCode",".phone_number_email_container_item2 .email-receipts-message",".checkout_left_container_mid_payment_method #menu_delivery_time",".checkout_left_container_mid_payment_method #menu_delivery_loc",".checkout_left_container_mid_payment_method .delivery_instructions_for_driver_container:last",".checkout_left_container_mid_payment_method #select_payment_method_container:contains('following options')","#divPaymentContainer span:contains('is this')","#CartContainer #ctl01_pnlOrderPaymentMsg","#ctl01_pnlOrderPaymentMsg > .Default_message_box",".tip_coupon_gift_certificates_title","#order_total_below_container",".menu_your_order_container_top","#complete_process_my_order_container > #change_my_order_container",".checkout_left_container_top",".checkout_left_container_bottom","#footer_container","#InnerFooter_Container"];e.map(removeElement),$(".checkout_left_container_mid_payment_method, .checkout_left_container_mid").css({border:"none"})}function removeExtraneousMenuSections(){var e=[".MenuList:contains('12 Cans of Diet Coke')",".MenuList:contains('Large Catering Tongs')",".MenuList:contains('Single Use Canned Heat')"];e.map(removeElement)}function gfRestaurants(){var e=[1100807,1329,1100769,1101877,1100679,1100320,1100193,1100251,1100759,1002,1100279,1194,1100511,1443,1101878,1100183,1100167],t=$(".mps_grid_table .actionItem");t.each(function(t,n){$item=$(n);var o=$item.children(".rdata");e.forEach(function(e){o.text().search(e)>0&&$item.append('<br><span style="color: #7FA64F;">(gf)<span>')})})}function removeElement(e){var t=$(e);t&&t.remove()}function setup(){options.doRemoveBackground&&(document.body.style.background="white"),options.doHighlightUnder&&(menuHighlight(),window.setInterval(checkCartTotal,1500)),options.doShowHearts&&showLoved(),options.doSkipDrinks&&window.setInterval(fixCheckout,1e3),options.doRemoveExtraneousElements&&removeExtraneousElements(),options.doRemoveExtraneousMenuSections&&removeExtraneousMenuSections(),options.doGfRestaurants&&gfRestaurants()}var TAX=.105,options,lastCartTotal;chrome.storage.sync.get({doHighlightUnder:!0,doHighlightUnderValue:11,doShowHearts:!0,doSkipDrinks:!0,doRemoveExtraneousElements:!1,doRemoveExtraneousMenuSections:!1,doRemoveBackground:!0,doGfRestaurants:!0},function(e){options=e,$(function(){setup()})});